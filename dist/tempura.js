!function(e){function r(e,r,o){return 4===arguments.length?t.apply(this,arguments):void n(e,{declarative:!0,deps:r,declare:o})}function t(e,r,t,o){n(e,{declarative:!1,deps:r,executingRequire:t,execute:o})}function n(e,r){r.name=e,e in v||(v[e]=r),r.normalizedDeps=r.deps}function o(e,r){if(r[e.groupIndex]=r[e.groupIndex]||[],-1==g.call(r[e.groupIndex],e)){r[e.groupIndex].push(e);for(var t=0,n=e.normalizedDeps.length;n>t;t++){var a=e.normalizedDeps[t],u=v[a];if(u&&!u.evaluated){var d=e.groupIndex+(u.declarative!=e.declarative);if(void 0===u.groupIndex||u.groupIndex<d){if(void 0!==u.groupIndex&&(r[u.groupIndex].splice(g.call(r[u.groupIndex],u),1),0==r[u.groupIndex].length))throw new TypeError("Mixed dependency cycle detected");u.groupIndex=d}o(u,r)}}}}function a(e){var r=v[e];r.groupIndex=0;var t=[];o(r,t);for(var n=!!r.declarative==t.length%2,a=t.length-1;a>=0;a--){for(var u=t[a],i=0;i<u.length;i++){var s=u[i];n?d(s):l(s)}n=!n}}function u(e){return y[e]||(y[e]={name:e,dependencies:[],exports:{},importers:[]})}function d(r){if(!r.module){var t=r.module=u(r.name),n=r.module.exports,o=r.declare.call(e,function(e,r){if(t.locked=!0,"object"==typeof e)for(var o in e)n[o]=e[o];else n[e]=r;for(var a=0,u=t.importers.length;u>a;a++){var d=t.importers[a];if(!d.locked)for(var i=0;i<d.dependencies.length;++i)d.dependencies[i]===t&&d.setters[i](n)}return t.locked=!1,r},{id:r.name});t.setters=o.setters,t.execute=o.execute;for(var a=0,i=r.normalizedDeps.length;i>a;a++){var l,s=r.normalizedDeps[a],c=v[s],f=y[s];f?l=f.exports:c&&!c.declarative?l=c.esModule:c?(d(c),f=c.module,l=f.exports):l=p(s),f&&f.importers?(f.importers.push(t),t.dependencies.push(f)):t.dependencies.push(null),t.setters[a]&&t.setters[a](l)}}}function i(e){var r,t=v[e];if(t)t.declarative?f(e,[]):t.evaluated||l(t),r=t.module.exports;else if(r=p(e),!r)throw new Error("Unable to load dependency "+e+".");return(!t||t.declarative)&&r&&r.__useDefault?r.default:r}function l(r){if(!r.module){var t={},n=r.module={exports:t,id:r.name};if(!r.executingRequire)for(var o=0,a=r.normalizedDeps.length;a>o;o++){var u=r.normalizedDeps[o],d=v[u];d&&l(d)}r.evaluated=!0;var c=r.execute.call(e,function(e){for(var t=0,n=r.deps.length;n>t;t++)if(r.deps[t]==e)return i(r.normalizedDeps[t]);throw new TypeError("Module "+e+" not declared as a dependency.")},t,n);c&&(n.exports=c),t=n.exports,t&&t.__esModule?r.esModule=t:r.esModule=s(t)}}function s(r){var t={};if(("object"==typeof r||"function"==typeof r)&&r!==e)if(m)for(var n in r)"default"!==n&&c(t,r,n);else{var o=r&&r.hasOwnProperty;for(var n in r)"default"===n||o&&!r.hasOwnProperty(n)||(t[n]=r[n])}return t.default=r,x(t,"__useDefault",{value:!0}),t}function c(e,r,t){try{var n;(n=Object.getOwnPropertyDescriptor(r,t))&&x(e,t,n)}catch(o){return e[t]=r[t],!1}}function f(r,t){var n=v[r];if(n&&!n.evaluated&&n.declarative){t.push(r);for(var o=0,a=n.normalizedDeps.length;a>o;o++){var u=n.normalizedDeps[o];-1==g.call(t,u)&&(v[u]?f(u,t):p(u))}n.evaluated||(n.evaluated=!0,n.module.execute.call(e))}}function p(e){if(I[e])return I[e];if("@node/"==e.substr(0,6))return D(e.substr(6));var r=v[e];if(!r)throw"Module "+e+" not present.";return a(e),f(e,[]),v[e]=void 0,r.declarative&&x(r.module.exports,"__esModule",{value:!0}),I[e]=r.declarative?r.module.exports:r.esModule}var v={},g=Array.prototype.indexOf||function(e){for(var r=0,t=this.length;t>r;r++)if(this[r]===e)return r;return-1},m=!0;try{Object.getOwnPropertyDescriptor({a:0},"a")}catch(h){m=!1}var x;!function(){try{Object.defineProperty({},"a",{})&&(x=Object.defineProperty)}catch(e){x=function(e,r,t){try{e[r]=t.value||t.get.call(e)}catch(n){}}}}();var y={},D="undefined"!=typeof System&&System._nodeRequire||"undefined"!=typeof require&&require.resolve&&"undefined"!=typeof process&&require,I={"@empty":{}};return function(e,n,o,a){return function(u){u(function(u){for(var d={_nodeRequire:D,register:r,registerDynamic:t,get:p,set:function(e,r){I[e]=r},newModule:function(e){return e}},i=0;i<n.length;i++)(function(e,r){r&&r.__esModule?I[e]=r:I[e]=s(r)})(n[i],arguments[i]);a(d);var l=p(e[0]);if(e.length>1)for(var i=1;i<e.length;i++)p(e[i]);return o?l.default:l})}}}("undefined"!=typeof self?self:global)(["2"],[],!1,function($__System){this.require,this.exports,this.module;!function(e){function n(e,n){e=e.replace(l,"");var r=e.match(u),t=(r[1].split(",")[n]||"require").replace(s,""),i=p[t]||(p[t]=new RegExp(a+t+f,"g"));i.lastIndex=0;for(var o,c=[];o=i.exec(e);)c.push(o[2]||o[3]);return c}function r(e,n,t,o){if("object"==typeof e&&!(e instanceof Array))return r.apply(null,Array.prototype.splice.call(arguments,1,arguments.length-1));if("string"==typeof e&&"function"==typeof n&&(e=[e]),!(e instanceof Array)){if("string"==typeof e){var l=i.get(e);return l.__useDefault?l.default:l}throw new TypeError("Invalid require")}for(var a=[],f=0;f<e.length;f++)a.push(i.import(e[f],o));Promise.all(a).then(function(e){n&&n.apply(null,e)},t)}function t(t,l,a){"string"!=typeof t&&(a=l,l=t,t=null),l instanceof Array||(a=l,l=["require","exports","module"].splice(0,a.length)),"function"!=typeof a&&(a=function(e){return function(){return e}}(a)),void 0===l[l.length-1]&&l.pop();var f,u,s;-1!=(f=o.call(l,"require"))&&(l.splice(f,1),t||(l=l.concat(n(a.toString(),f)))),-1!=(u=o.call(l,"exports"))&&l.splice(u,1),-1!=(s=o.call(l,"module"))&&l.splice(s,1);var p={name:t,deps:l,execute:function(n,t,o){for(var p=[],c=0;c<l.length;c++)p.push(n(l[c]));o.uri=o.id,o.config=function(){},-1!=s&&p.splice(s,0,o),-1!=u&&p.splice(u,0,t),-1!=f&&p.splice(f,0,function(e,t,l){return"string"==typeof e&&"function"!=typeof t?n(e):r.call(i,e,t,l,o.id)});var d=a.apply(-1==u?e:t,p);return"undefined"==typeof d&&o&&(d=o.exports),"undefined"!=typeof d?d:void 0}};if(t)c.anonDefine||c.isBundle?c.anonDefine&&c.anonDefine.name&&(c.anonDefine=null):c.anonDefine=p,c.isBundle=!0,i.registerDynamic(p.name,p.deps,!1,p.execute);else{if(c.anonDefine&&!c.anonDefine.name)throw new Error("Multiple anonymous defines in module "+t);c.anonDefine=p}}var i=$__System,o=Array.prototype.indexOf||function(e){for(var n=0,r=this.length;r>n;n++)if(this[n]===e)return n;return-1},l=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,a="(?:^|[^$_a-zA-Z\\xA0-\\uFFFF.])",f="\\s*\\(\\s*(\"([^\"]+)\"|'([^']+)')\\s*\\)",u=/\(([^\)]*)\)/,s=/^\s+|\s+$/g,p={};t.amd={};var c={isBundle:!1,anonDefine:null};i.amdDefine=t,i.amdRequire=r}("undefined"!=typeof self?self:global),$__System.register("3",["4"],function(exports_1,context_1){"use strict";var PopOver,PopOverController,tempura;context_1&&context_1.id;return{setters:[function(_1){}],execute:function(){PopOver=function(){function PopOver(){this.controller=PopOverController,this.restrict="A",this.bindToController=!1,this.scope=!1,this.link=function(scope,element,attrs,ctrl){"true"!==attrs.popOverDisabled&&ctrl.initialize(),"true"===attrs.popOverEnableWatchers&&ctrl.addWatchers()}}return PopOver.instance=function(){return new PopOver},PopOver}(),PopOverController=function(){function PopOverController($scope,$compile,$window,$document,$element,$attrs,tempuraPosition){var _this=this;this.$scope=$scope,this.$compile=$compile,this.$window=$window,this.$document=$document,this.$element=$element,this.$attrs=$attrs,this.tempuraPosition=tempuraPosition,this.isInitialized=!1,this.showPopOver=function(event){_this.cancelHideTimer(),_this.cancelShowItmer(),setTimeout(function(){/click/i.test(event.type)&&_this.isActive?_this.hidePopOverHandler():_this.showPopOverHandler(event)},100)},this.showPopOverHandler=function(event){_this.isActive||(_this.setPopOverPosition(event),angular.element(_this.popOverElement).addClass("active"),_this.moveCaret(),"true"!==_this.$attrs.popOverNoScroll&&_this.scrollToPopOver(),_this.isActive=!0)},this.hidePopOverHandler=function(event){angular.element(_this.popOverElement).removeClass("active"),_this.isActive=!1},this.hidePopOver=function(event){_this.cancelHideTimer();var timeout=parseInt(_this.$attrs.popOverHideTimeout||100,10);_this.hidePopOverTimer=setTimeout(function(){_this.hidePopOverHandler(event)},timeout)},this.cancelHideTimer=function(){clearTimeout(_this.hidePopOverTimer),_this.hidePopOverTimer=void 0},this.cancelShowItmer=function(){clearTimeout(_this.showPopOverTimer),_this.showPopOverTimer=void 0},this.$scope.$on("$destroy",function(){_this.isInitialized&&(_this.removeEventListeners(),_this.removeFromDocument())})}return PopOverController.prototype.initialize=function(){this.createAndAttachPopOver(),this.parseEventsToHandle(),this.addEventListeners(),this.isInitialized=!0},PopOverController.prototype.addWatchers=function(){var _this=this;this.$scope.$watch(function(){return _this.$attrs.popOverDisabled},function(isDisabled){"true"===isDisabled&&_this.isInitialized?_this.removeEventListeners():_this.isInitialized?_this.addEventListeners():_this.initialize()}),this.$scope.$watch(function(){return _this.$attrs.popOverMakeActive},function(isActive){"true"===isActive?(_this.isInitialized||_this.initialize(),_this.showPopOverHandler()):_this.hidePopOverHandler()})},PopOverController.prototype.parseEventsToHandle=function(){var triggers=this.$attrs.popOverTriggers,tagName=this.$element[0].tagName;return/click/i.test(triggers)?(this.isClick=!0,void(this.triggers=["click","touchstart"])):(triggers?this.triggers=triggers.replace(/(?!,)\W+/g,"").split(","):this.triggers=/button|input/i.test(tagName)?["focus"]:["mouseover","touchstart"],this.closers=[],this.triggers.indexOf("focus")>-1&&(this.isFocus=!0,this.closers.push("blur")),this.triggers.indexOf("mouseover")>-1&&(this.isHover=!0,this.closers.push("mouseout")),void(this.triggers.indexOf("touchstart")>-1&&(this.isHover=!0,this.closers.push("touchleave"))))},PopOverController.prototype.addEventListeners=function(){var _this=this,element=this.$element[0];return this.isClick?(element.addEventListener("click",this.showPopOver),void element.addEventListener("touchstart",this.showPopOver)):(this.triggers.forEach(function(trigger){element.addEventListener(trigger,_this.showPopOver)}),this.closers.forEach(function(closer){element.addEventListener(closer,_this.hidePopOver)}),this.popOverElement.addEventListener("mouseover",this.cancelHideTimer),void this.popOverElement.addEventListener("mouseout",this.hidePopOver))},PopOverController.prototype.removeEventListeners=function(){var _this=this,element=this.$element[0];return this.isClick?(element.removeEventListener("click",this.showPopOver),void element.removeEventListener("touchstart",this.showPopOver)):(this.triggers.forEach(function(trigger){element.removeEventListener(trigger,_this.showPopOver)}),this.closers.forEach(function(closer){element.removeEventListener(closer,_this.hidePopOver)}),this.popOverElement.removeEventListener("mouseover",this.cancelHideTimer),void this.popOverElement.removeEventListener("mouseout",this.hidePopOver))},PopOverController.prototype.setPopOverPosition=function(event){this.position=this.$attrs.position||PopOverController.positions.bottom;var verticalOffset=parseInt(this.$attrs.popOverVerticalOffset,10)||0,horizontalOffset=parseInt(this.$attrs.popOverHorizontalOffset,10)||10,useMouseTarget="true"===this.$attrs.popOverUseMouseTarget,elementPosition=useMouseTarget?this.tempuraPosition.eventPosition(event):this.tempuraPosition.position(this.$element),popoverPosition=this.tempuraPosition.position(this.popOverElement),screenWidth=this.$document[0].documentElement.clientWidth;(this.position===PopOverController.positions.right&&elementPosition.left+popoverPosition.width>screenWidth||this.position===PopOverController.positions.left&&elementPosition.left-popoverPosition.width<0)&&(this.position=PopOverController.positions.bottom);var top="auto",left="auto",right="auto";switch(this.position){case PopOverController.positions.top:case PopOverController.positions.bottom:var horizontalAlign=(popoverPosition.width-elementPosition.width)/2,_left=elementPosition.left-horizontalAlign;_left=_left<0?0:_left,top=(this.position===PopOverController.positions.top?elementPosition.top-popoverPosition.height-verticalOffset:elementPosition.top+elementPosition.height+verticalOffset)+"px",_left+popoverPosition.width>screenWidth?(left="auto",right="0"):left=_left+"px";break;case PopOverController.positions.right:case PopOverController.positions.left:var verticalAlign=(popoverPosition.height-elementPosition.height)/2,_top=elementPosition.top-verticalAlign;left=(this.position===PopOverController.positions.left?elementPosition.left-popoverPosition.width-horizontalOffset:elementPosition.left+elementPosition.width+horizontalOffset)+"px",top=_top<0?"0":_top+"px"}var poStyle=this.popOverElement.style;poStyle.left=left,poStyle.right=right,poStyle.top=top;for(var pos in PopOverController.positions)angular.element(this.popOverElement).removeClass(pos);angular.element(this.popOverElement).addClass(this.position)},PopOverController.prototype.moveCaret=function(){var caret=this.popOverElement.querySelectorAll(".caret")[0],useMouseTarget="true"===this.$attrs.popOverUseMouseTarget,caretBounds=caret.getBoundingClientRect();if(caret){var poBounds=this.popOverElement.getBoundingClientRect(),elemBounds=this.$element[0].getBoundingClientRect();if(this.position===PopOverController.positions.top||this.position===PopOverController.positions.bottom){var _left=-1*(caretBounds.width/2),poHorizontalCenter=poBounds.left+poBounds.width/2,elemHorizontalCenter=elemBounds.left+elemBounds.width/2;_left+=poHorizontalCenter===elemHorizontalCenter||useMouseTarget?poBounds.width/2:elemBounds.left-poBounds.left+elemBounds.width/2,caret.style.left=_left+"px",this.position===PopOverController.positions.top?caret.style.bottom="0":caret.style.top="0"}else{var _top=-1*(caretBounds.height/2);poBounds.top+poBounds.height/2,elemBounds.top+elemBounds.height/2;_top+=poBounds.height/2,caret.style.top=_top+"px",this.position===PopOverController.positions.right?caret.style.left="0":caret.style.right="0"}}},PopOverController.prototype.scrollToPopOver=function(){var poBounds=this.popOverElement.getBoundingClientRect(),screenHeight=this.$document[0].documentElement.clientHeight,scrollPosition=-1*this.$document[0].documentElement.getBoundingClientRect().top,scrollOffset=50,scrollTo=0;poBounds.top<scrollOffset?scrollTo=scrollPosition+poBounds.top-scrollOffset:poBounds.bottom>screenHeight&&(scrollTo=scrollPosition-(screenHeight-poBounds.bottom)),0!==scrollTo&&this.$window.scrollTo(0,scrollTo)},PopOverController.prototype.createAndAttachPopOver=function(){var poElement,content=this.$attrs.popOverContent||"",contentSrc=this.$attrs.popOverContentSrc;if(poElement=this.$compile(PopOverController.tpl.replace("##content##",content))(this.$scope),this.popOverElement=angular.element(poElement)[0],contentSrc){var src=this.$element[0].querySelectorAll(contentSrc)[0];if(src=src?src:this.$document[0].querySelectorAll(contentSrc)[0],!src)return void console.error("pop over content src does not exist");this.popOverElement.querySelectorAll(".popOver-contentInner")[0].appendChild(src)}this.$attrs.popOverCssClass&&angular.element(this.popOverElement).addClass(this.$attrs.popOverCssClass),this.$attrs.popOverMaxWidth&&(this.popOverElement.style.maxWidth=this.$attrs.popOverMaxWidth+"px"),this.$document[0].body.appendChild(this.popOverElement)},PopOverController.prototype.removeFromDocument=function(){this.$document[0].body.removeChild(this.popOverElement)},PopOverController.$inject=["$scope","$compile","$window","$document","$element","$attrs","tempuraPosition"],PopOverController.positions={bottom:"bottom",left:"left",right:"right",top:"top"},PopOverController.tpl='\n        <aside class="popOver-content">\n            <div class="popOver-contentInner">\n                ##content##\n            </div>\n            <span class="caret"></span>\n        </aside>\n    ',PopOverController}(),tempura=angular.module("tempura.popOver",["tempura.utility.position"]).directive("ghsPopOver",PopOver.instance)}}}),$__System.register("4",[],function(exports_1,context_1){"use strict";var TempuraPosition;context_1&&context_1.id;return{setters:[],execute:function(){TempuraPosition=function(){function TempuraPosition($document,$window){this.$document=$document,this.$window=$window}return TempuraPosition.prototype.getRawNode=function(elem){return elem.nodeName?elem:elem[0]||elem},TempuraPosition.prototype.offset=function(elem){elem=this.getRawNode(elem);var elemBCR=elem.getBoundingClientRect();return{width:Math.round(angular.isNumber(elemBCR.width)?elemBCR.width:elem.offsetWidth),height:Math.round(angular.isNumber(elemBCR.height)?elemBCR.height:elem.offsetHeight),top:Math.round(elemBCR.top+(this.$window.pageYOffset||this.$document[0].documentElement.scrollTop)),left:Math.round(elemBCR.left+(this.$window.pageXOffset||this.$document[0].documentElement.scrollLeft))}},TempuraPosition.prototype.offsetParent=function(elem){var _this=this;elem=this.getRawNode(elem);for(var offsetParent=elem.offsetParent||this.$document[0].documentElement,isStaticPositioned=function(el){return"static"===(_this.$window.getComputedStyle(el).position||"static")};offsetParent&&offsetParent!==this.$document[0].documentElement&&isStaticPositioned(offsetParent);)offsetParent=offsetParent.offsetParent;return offsetParent||this.$document[0].documentElement},TempuraPosition.prototype.position=function(elem){elem=this.getRawNode(elem);var elemOffset=this.offset(elem),parent=this.offsetParent(elem),parentOffset={top:0,left:0};return parent!==this.$document[0].documentElement&&(parentOffset=this.offset(parent),parentOffset.top+=parent.clientTop-parent.scrollTop,parentOffset.left+=parent.clientLeft-parent.scrollLeft),{width:Math.round(angular.isNumber(elemOffset.width)?elemOffset.width:elem.offsetWidth),height:Math.round(angular.isNumber(elemOffset.height)?elemOffset.height:elem.offsetHeight),top:Math.round(elemOffset.top-parentOffset.top),left:Math.round(elemOffset.left-parentOffset.left)}},TempuraPosition.prototype.eventPosition=function(event){var target=(this.offset(this.$document[0].body),event.target),_top=event.clientY,_left=event.clientX,_width=0,_height=0;if(_top&&_left||!target)_top=Math.round(_top+(this.$window.pageYOffset||this.$document[0].documentElement.scrollTop)),_left=Math.round(_left+(this.$window.pageXOffset||this.$document[0].documentElement.scrollLeft));else{var targetPos=this.position(target);_top=targetPos.top,_left=targetPos.left,_width=targetPos.width,_height=targetPos.height}return{width:_width,height:_height,top:_top,left:_left}},TempuraPosition.$inject=["$document","$window"],TempuraPosition}(),exports_1("TempuraPosition",TempuraPosition),angular.module("tempura.utility.position",[]).service("tempuraPosition",TempuraPosition)}}}),$__System.register("5",[],function(exports_1,context_1){"use strict";var TypeaheadParser;context_1&&context_1.id;return{setters:[],execute:function(){TypeaheadParser=function(){function TypeaheadParser($parse){this.$parse=$parse}return TypeaheadParser.prototype.parse=function(input){var match=input.match(TypeaheadParser.TYPEAHEAD_REGEXP);if(!match)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+input+'".');return{itemName:match[3],source:this.$parse(match[4]),viewMapper:this.$parse(match[2]||match[1]),modelMapper:this.$parse(match[1])}},TypeaheadParser.$inject=["$parse"],TypeaheadParser.TYPEAHEAD_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/,TypeaheadParser}(),exports_1("TypeaheadParser",TypeaheadParser),angular.module("tempura.typeahead-parser",[]).service("typeaheadParser",TypeaheadParser)}}}),function(){var define=$__System.amdDefine;define("6",[],function(){return'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\', width: \'100%\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div ghs-typeahead-match index="$index" match="match" reload="::forceReload(value)" query="query" template-url="::templateUrl"></div>\n    </li>\n</ul>\n'})}(),$__System.register("7",[],function(exports_1,context_1){"use strict";context_1&&context_1.id;return{setters:[],execute:function(){angular.module("tempura.utility.debounce",[]).factory("$$debounce",["$timeout",function($timeout){return function(callback,debounceTime){var timeoutPromise;return function(){var self=this,args=Array.prototype.slice.call(arguments);timeoutPromise&&$timeout.cancel(timeoutPromise),timeoutPromise=$timeout(function(){callback.apply(self,args)},debounceTime)}}}])}}}),$__System.register("8",["6","7"],function(exports_1,context_1){"use strict";var typeahead_popup_html_text_1,TypeaheadPopup,tempura;context_1&&context_1.id;return{setters:[function(typeahead_popup_html_text_1_1){typeahead_popup_html_text_1=typeahead_popup_html_text_1_1},function(_1){}],execute:function(){TypeaheadPopup=function(){function TypeaheadPopup($$debounce,$templateCache){var _this=this;this.$$debounce=$$debounce,this.$templateCache=$templateCache,this.scope={matches:"<",query:"<",active:"=",position:"<",moveInProgress:"<",select:"&",assignIsOpen:"&",debounce:"&",templateUrl:"@",reload:"&"},this.replace=!0,this.templateUrl=function(element,attrs){return attrs.popupTemplateUrl||_this.$templateCache.put("typeahead/template/typeahead-popup.html",typeahead_popup_html_text_1.default),attrs.popupTemplateUrl||"typeahead/template/typeahead-popup.html"},this.link=function(scope,element,attrs){scope.isOpen=function(){var isDropdownOpen=scope.matches.length>0;return scope.assignIsOpen({isOpen:isDropdownOpen}),isDropdownOpen},scope.isActive=function(matchIdx){return scope.active===matchIdx},scope.selectActive=function(matchIdx){scope.active=matchIdx},scope.forceReload=function(value){var debounce=scope.debounce();angular.isNumber(debounce)||angular.isObject(debounce)?this.$$debounce(function(){scope.reload({value:value})},angular.isNumber(debounce)?debounce:debounce.default):scope.reload({value:value})},scope.selectMatch=function(activeIdx,evt){var debounce=scope.debounce();angular.isNumber(debounce)||angular.isObject(debounce)?this.$$debounce(function(){scope.select({activeIdx:activeIdx,evt:evt})},angular.isNumber(debounce)?debounce:debounce.default):scope.select({activeIdx:activeIdx,evt:evt})}}}return TypeaheadPopup.instance=function(){var directive=function($$debounce,$templateCache){return new TypeaheadPopup($$debounce,$templateCache)};return directive.$inject=["$$debounce","$templateCache"],directive},TypeaheadPopup}(),exports_1("TypeaheadPopup",TypeaheadPopup),tempura=angular.module("tempura.typeahead.popup",[]).directive("ghsTypeaheadPopup",TypeaheadPopup.instance())}}}),function(){var define=$__System.amdDefine;define("9",[],function(){return'<a tabindex="-1" ng-bind-html="match.label | ghsTypeaheadSanitize:query"></a>\n'})}(),$__System.register("a",["9"],function(exports_1,context_1){"use strict";var typeahead_match_html_text_1,TypeaheadMatch,TypeaheadMatchFilterFactory,TypeaheadMatchFilter,tempura;context_1&&context_1.id;return{setters:[function(typeahead_match_html_text_1_1){typeahead_match_html_text_1=typeahead_match_html_text_1_1}],execute:function(){TypeaheadMatch=function(){function TypeaheadMatch($templateRequest,$compile,$parse,$templateCache){var _this=this;this.$templateRequest=$templateRequest,this.$compile=$compile,this.$parse=$parse,this.$templateCache=$templateCache,this.link=function(scope,element,attrs){_this.$parse(attrs.templateUrl)(scope.$parent)||_this.$templateCache.put("typeahead/template/typeahead-match.html",typeahead_match_html_text_1.default);var tplUrl=_this.$parse(attrs.templateUrl)(scope.$parent)||"typeahead/template/typeahead-match.html";_this.$templateRequest(tplUrl).then(function(tplContent){var tplEl=angular.element(tplContent.trim());element.replaceWith(tplEl),_this.$compile(tplEl)(scope)})},this.restrict="A",this.scope={index:"<",match:"<",query:"<",reload:"&"}}return TypeaheadMatch.instance=function(){var directive=function($templateRequest,$compile,$parse,$templateCache){return new TypeaheadMatch($templateRequest,$compile,$parse,$templateCache)};return directive.$inject=["$templateRequest","$compile","$parse","$templateCache"],directive},TypeaheadMatch}(),exports_1("TypeaheadMatch",TypeaheadMatch),TypeaheadMatchFilterFactory=function(){function TypeaheadMatchFilterFactory(){}return TypeaheadMatchFilterFactory.Factory=function(){var filter=TypeaheadMatchFilter;return filter.$inject=["$injector","$sce"],filter},TypeaheadMatchFilterFactory}(),exports_1("TypeaheadMatchFilterFactory",TypeaheadMatchFilterFactory),TypeaheadMatchFilter=function(){function TypeaheadMatchFilter($injector,$sce){var _this=this;return this.$injector=$injector,this.$sce=$sce,this.$filter=function(matchItem,query){return!_this.isSanitizePresent&&TypeaheadMatchFilter.containsHtml(matchItem)&&$log.warn("Unsafe use of typeahead please use ngSanitize"),matchItem+="",_this.isSanitizePresent||(matchItem=_this.$sce.trustAsHtml(matchItem)),matchItem},this.isSanitizePresent=this.$injector.has("$sanitize"),this.$filter}return TypeaheadMatchFilter.containsHtml=function(matchItem){return/<.*>/g.test(matchItem)},TypeaheadMatchFilter}(),exports_1("TypeaheadMatchFilter",TypeaheadMatchFilter),tempura=angular.module("tempura.typeahead.match",[]).directive("ghsTypeaheadMatch",TypeaheadMatch.instance()).filter("ghsTypeaheadSanitize",TypeaheadMatchFilterFactory.Factory())}}}),$__System.register("b",["4","7","5","8","a"],function(exports_1,context_1){"use strict";var Typeahead,TypeaheadLink,TypeaheadController,tempura;context_1&&context_1.id;return{setters:[function(_1){},function(_2){},function(_3){},function(_4){},function(_5){}],execute:function(){Typeahead=function(){function Typeahead(){this.controller=TypeaheadController,this.link=function($scope,$element,$attrs,ctrls){ctrls[2].init(ctrls[0],ctrls[1])},this.restrict="A",this.require=["ngModel","^?ngModelOptions","ghsTypeahead"],this.bindToController={minLength:"<?typeaheadMinLength",waitTime:"<?typeaheadWaitMs",isEditable:"<?typeaheadEditable",shouldSelect:"&?typeaheadShouldSelect",onSelectCallback:"&?typeaheadOnSelect",shouldSelectOnBlur:"<?typeaheadSelectOnBlur",noResults:"=?typeaheadNoResults",inputFormatter:"&?typeaheadInputFormatter",appendToBody:"<?typeaheadAppendToBody",appendTo:"<?typeaheadAppendTo",focusFirst:"<?typeaheadFocusFirst",focusOnSelect:"<?typeaheadFocusOnSelect",selectOnExact:"<?typeaheadSelectOnExact",isOpen:"=?typeaheadIsOpen",typeaheadTemplateUrl:"@?",typeaheadPopupTemplateUrl:"@?",isLoading:"=?typeaheadLoading"},this.controllerAs="taVm"}return Typeahead.instance=function(){return new Typeahead},Typeahead}(),exports_1("Typeahead",Typeahead),TypeaheadLink=function(){function TypeaheadLink($scope,$element,$attrs,ctrls){this.$scope=$scope,this.$element=$element,this.$attrs=$attrs,this.ctrls=ctrls,ctrls[2].init(ctrls[0],ctrls[1])}return TypeaheadLink}(),TypeaheadController=function(){function TypeaheadController($scope,$element,$attrs,$compile,$parse,$q,$timeout,$document,$window,$rootScope,tempuraPosition,typeaheadParser,$$debounce){var _this=this;this.$scope=$scope,this.$element=$element,this.$attrs=$attrs,this.$compile=$compile,this.$parse=$parse,this.$q=$q,this.$timeout=$timeout,this.$document=$document,this.$window=$window,this.$rootScope=$rootScope,this.tempuraPosition=tempuraPosition,this.typeaheadParser=typeaheadParser,this.$$debounce=$$debounce,this.eventDebounceTime=200,this.assignIsOpen=function(isOpen){_this.isOpen=isOpen},this.select=function(activeIdx,evt){var model,item,locals={};locals[_this.parserResult.itemName]=item=_this.matches[activeIdx].model,item.ngDisabled||(_this.selected=!0,model=_this.parserResult.modelMapper(_this.$scope,locals),_this.$setModelValue(_this.$scope,model),_this.modelCtrl.$setValidity("editable",!0),_this.modelCtrl.$setValidity("parse",!0),_this.onSelectCallback({$item:item,$model:model,$label:_this.parserResult.viewMapper(_this.$scope,locals),$event:evt}),_this.resetMatches(),_this.focusOnSelect!==!1&&_this.$timeout(function(){_this.$element[0].focus()},0,!1))},this.getMatchesAsync=function(inputValue,evt){var locals={$viewValue:inputValue};_this.isLoading=!0,_this.noResults=!1,_this.$q.when(_this.parserResult.source(_this.$scope,locals)).then(function(matches){var onCurrentRequest=inputValue===_this.modelCtrl.$viewValue;if(onCurrentRequest)if(matches&&matches.length>0){_this.activeIdx=_this.focusFirst?0:-1,_this.noResults=!1,_this.matches.length=0;for(var i=0;i<matches.length;i++)locals[_this.parserResult.itemName]=matches[i],_this.matches.push({id:_this.getMatchId(i),label:_this.parserResult.viewMapper(_this,locals),model:matches[i]});_this.query=inputValue,_this.recalculatePosition(),_this.$element.attr("aria-expanded","true"),_this.selectOnExact&&1===_this.matches.length&&_this.inputIsExactMatch(inputValue,0)&&(angular.isNumber(_this.debounceUpdate)||angular.isObject(_this.debounceUpdate)?_this.$$debounce(function(){_this.select(0,evt)},angular.isNumber(_this.debounceUpdate)?_this.debounceUpdate:_this.debounceUpdate.default):_this.select(0,evt))}else _this.resetMatches(),_this.noResults=!0;onCurrentRequest&&(_this.isLoading=!1)},function(){_this.resetMatches(),_this.isLoading=!1,_this.noResults=!0})},this.$setModelValue=function(scope,newValue){return angular.isFunction(_this.parsedModel(_this.$scope))&&_this.ngModelOptions&&_this.ngModelOptions.$options&&_this.ngModelOptions.$options.getterSetter?_this.invokeModelSetter(scope,{$$$p:newValue}):_this.parsedModel.assign(scope,newValue)},this.resetMatches=function(){_this.matches=[],_this.activeIdx=-1,_this.$element.attr("aria-expanded","false")},this.inputIsExactMatch=function(inputValue,index){return!!(_this.matches.length>index&&inputValue)&&inputValue.toUpperCase()===_this.matches[index].label.toUpperCase()},this.getMinLength=function(){return _this.minLength||0===_this.minLength?_this.minLength:1},this.getMatchId=function(index){return _this.popupId+"-option-"+index},this.fireRecalculating=function(){_this.moveInProgress||(_this.moveInProgress=!0,_this.$scope.$digest()),_this.debouncedRecalculate()},this.scheduleSearchWithTimeout=function(inputValue){_this.timeoutPromise=_this.$timeout(function(){_this.getMatchesAsync(inputValue)},_this.waitTime)},this.cancelPreviousTimeout=function(){_this.timeoutPromise&&_this.$timeout.cancel(_this.timeoutPromise)},this.debouncedRecalculate=this.$$debounce(function(){_this.matches.length&&_this.recalculatePosition(),_this.moveInProgress=!1},this.eventDebounceTime),this.recalculatePosition=function(){_this.position=_this.appendToBody?_this.tempuraPosition.offset(_this.$element):_this.tempuraPosition.position(_this.$element),_this.position.top+=_this.$element.prop("offsetHeight")},this.dismissClickHandler=function(evt){_this.touchMove||_this.$element[0]===evt.target||3===evt.which||0===_this.matches.length||(_this.resetMatches(),_this.$rootScope.$$phase||_this.$scope.$digest())},this.touchStartHandler=function(evt){_this.touchMove=!1},this.touchMoveHandler=function(evt){_this.touchMove=!0},this.initAria=function(){_this.popupId="typeahead-"+_this.$scope.$id+"-"+Math.floor(1e4*Math.random()),_this.$element.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":_this.popupId})},this.initPopupEl=function(){_this.popUpEl=angular.element("<div ghs-typeahead-popup></div>"),_this.popUpEl.attr({id:_this.popupId,matches:"taVm.matches",active:"taVm.activeIdx",select:"taVm.select(activeIdx, evt)","move-in-progress":"taVm.moveInProgress",query:"taVm.query",position:"taVm.position","assign-is-open":"taVm.assignIsOpen(isOpen)",debounce:"taVm.debounceUpdate",reload:"taVm.getMatchesAsync(value, evt)"}),angular.isDefined(_this.typeaheadTemplateUrl)&&_this.popUpEl.attr("template-url",_this.typeaheadTemplateUrl),angular.isDefined(_this.typeaheadPopupTemplateUrl)&&_this.popUpEl.attr("popup-template-url",_this.typeaheadPopupTemplateUrl);
},this.initWatchers=function(){var $rootListeners={activeIndex:_this.$scope.$watch(function(){return _this.activeIdx},function(index){!angular.isDefined(index)||index<0?_this.$element.removeAttr("aria-activedescendant"):_this.$element.attr("aria-activedescendant",_this.getMatchId(index))})};_this.appendToBody&&(angular.element(_this.$window).on("resize",_this.fireRecalculating),_this.$document.find("body").on("scroll",_this.fireRecalculating)),_this.$scope.$on("$destroy",function(){angular.element(_this.$window).off("resize",_this.fireRecalculating),_this.$document.find("body").off("scroll",_this.fireRecalculating),_this.$document.off("click touchend",_this.dismissClickHandler),_this.$document.off("touchstart",_this.touchStartHandler),_this.$document.off("touchmove",_this.touchMoveHandler),(_this.appendToBody||_this.appendTo)&&_this.$popup.remove(),_this.popUpEl.remove()});for(var unbind in $rootListeners)_this.$scope.$on("$destroy",$rootListeners[unbind])},this.initEventBindings=function(){_this.$element.on("keydown",function(evt){if(0!==_this.matches.length&&TypeaheadController.HOT_KEYS.indexOf(evt.which)!==-1){var shouldSelectBoolean=_this.shouldSelect({$event:evt});if(_this.activeIdx===-1&&shouldSelectBoolean||9===evt.which&&evt.shiftKey)return _this.resetMatches(),void _this.$scope.$digest();evt.preventDefault();switch(evt.which){case 27:evt.stopPropagation(),_this.resetMatches(),_this.$scope.$digest();break;case 38:_this.activeIdx=(_this.activeIdx>0?_this.activeIdx:_this.matches.length)-1,_this.$scope.$digest();break;case 40:_this.activeIdx=(_this.activeIdx+1)%_this.matches.length,_this.$scope.$digest();break;default:shouldSelectBoolean&&_this.$scope.$apply(function(){angular.isNumber(_this.debounceUpdate)||angular.isObject(_this.debounceUpdate)?_this.$$debounce(function(){_this.select(_this.activeIdx,evt)},angular.isNumber(_this.debounceUpdate)?_this.debounceUpdate:_this.debounceUpdate.default):_this.select(_this.activeIdx,evt)})}}}),_this.$element.bind("focus",function(evt){_this.hasFocus=!0,0!==_this.minLength||_this.modelCtrl.$viewValue?_this.modelCtrl.$viewValue&&_this.minLength<=_this.modelCtrl.$viewValue.length&&_this.$timeout(function(){_this.getMatchesAsync(_this.modelCtrl.$viewValue,evt)},0):_this.$timeout(function(){_this.getMatchesAsync(_this.modelCtrl.$viewValue,evt)},0)}),_this.$element.bind("blur",function(evt){_this.shouldSelectOnBlur&&_this.matches.length&&_this.activeIdx!==-1&&!_this.selected&&(_this.selected=!0,_this.$scope.$apply(function(){angular.isObject(_this.debounceUpdate)&&angular.isNumber(_this.debounceUpdate.blur)?_this.$$debounce(function(){this.select(this.activeIdx,evt)},_this.debounceUpdate.blur):_this.select(_this.activeIdx,evt)})),!_this.isEditable&&_this.modelCtrl.$error.editable&&(_this.modelCtrl.$setViewValue(),_this.$scope.$apply(function(){_this.modelCtrl.$setValidity("editable",!0),_this.modelCtrl.$setValidity("parse",!0)}),_this.$element.val("")),_this.hasFocus=!1,_this.selected=!1}),_this.$document.on("touchstart",_this.touchStartHandler),_this.$document.on("touchmove",_this.touchMoveHandler),_this.$document.on("click touchend",_this.dismissClickHandler)},this.compilePopup=function(){_this.$popup=_this.$compile(_this.popUpEl)(_this.$scope),_this.appendToBody?_this.$document.find("body").append(_this.$popup):_this.appendTo?angular.element(_this.appendTo).eq(0).append(_this.$popup):_this.$element.after(_this.$popup)},this.defaultBindings=function(){_this.minLength||0===_this.minLength||(_this.minLength=1),_this.waitTime=_this.waitTime?_this.waitTime:0,_this.isEditable=_this.isEditable!==!1,_this.shouldSelectOnBlur=!!angular.isDefined(_this.shouldSelectOnBlur)&&_this.shouldSelectOnBlur,_this.shouldSelect=_this.shouldSelect?_this.shouldSelect:function(vals){var evt=vals.$event;return 13===evt.which||9===evt.which},_this.appendToBody=!!_this.appendToBody,_this.appendTo=_this.appendTo||null,_this.focusFirst=_this.focusFirst!==!1,_this.selectOnExact=!!_this.selectOnExact,_this.onSelectCallback=_this.onSelectCallback||angular.noop},this.defaultBindings(),this.parsedModel=this.$parse(this.$attrs.ngModel),this.parserResult=this.typeaheadParser.parse(this.$attrs.ghsTypeahead),this.invokeModelSetter=this.$parse(this.$attrs.ngModel+"($$$p)"),this.touchMove=!1,this.resetMatches(),this.initAria(),this.initPopupEl(),this.initWatchers(),this.initEventBindings(),this.compilePopup()}return TypeaheadController.prototype.init=function(_modelCtrl,_ngModelOptions){var _this=this;this.modelCtrl=_modelCtrl,this.ngModelOptions=_ngModelOptions,this.debounceUpdate=this.modelCtrl.$options&&this.$parse(this.modelCtrl.$options.debounce)(this.$scope),this.modelCtrl.$parsers.unshift(function(inputValue){return _this.hasFocus=!0,0===_this.minLength||inputValue&&inputValue.length>=_this.minLength?_this.waitTime>0?(_this.cancelPreviousTimeout(),_this.scheduleSearchWithTimeout(inputValue)):_this.getMatchesAsync(inputValue):(_this.isLoading=!1,_this.cancelPreviousTimeout(),_this.resetMatches()),_this.isEditable?inputValue:inputValue?void _this.modelCtrl.$setValidity("editable",!1):(_this.modelCtrl.$setValidity("editable",!0),null)}),this.modelCtrl.$formatters.push(function(modelValue){var candidateViewValue,emptyViewValue,locals={};return _this.isEditable||_this.modelCtrl.$setValidity("editable",!0),_this.inputFormatter?(locals.$model=modelValue,_this.inputFormatter(locals)):(locals[_this.parserResult.itemName]=modelValue,candidateViewValue=_this.parserResult.viewMapper(_this.$scope,locals),locals[_this.parserResult.itemName]=void 0,emptyViewValue=_this.parserResult.viewMapper(_this.$scope,locals),candidateViewValue!==emptyViewValue?candidateViewValue:modelValue)})},TypeaheadController.$inject=["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","tempuraPosition","typeaheadParser","$$debounce"],TypeaheadController.HOT_KEYS=[9,13,27,38,40],TypeaheadController}(),tempura=angular.module("tempura.typeahead",["tempura.typeahead.popup","tempura.typeahead.match","tempura.typeahead-parser","tempura.utility.position","tempura.utility.debounce"]).directive("ghsTypeahead",Typeahead.instance)}}}),$__System.register("2",["3","b"],function(exports_1,context_1){"use strict";var tempura;context_1&&context_1.id;return{setters:[function(_1){},function(_2){}],execute:function(){tempura=angular.module("tempura",["tempura.popOver","tempura.typeahead"])}}})})(function(factory){"function"==typeof define&&define.amd?define([],factory):"object"==typeof module&&module.exports&&"function"==typeof require?module.exports=factory():factory()});